-- simple database

CREATE TABLE TEST(
    ID INT PRIMARY KEY,
    NAME VARCHAR(255) NOT NULL,
    AGE INT NOT NULL
)

INSERT INTO TEST VALUES (1, 'John', 20), (2, 'Jane', 30), (3, 'Doe', 40);


-- USER TABLE
CREATE TABLE USERS(
    ID INT PRIMARY KEY,
    USERNAME VARCHAR(255) NOT NULL,
    PASSWORD VARCHAR(255) NOT NULL,
)



-- SCHEDULE TABLE - Bảng chứa task lên lịch của user, tương ứng với từng user
-- Khi check: STATUS === 'PENDING' && EXECUTE_AT <= CURRENT_TIMESTAMP -> thực hiện task
CREATE TABLE SCHEDULE_TASKS(
    ID INT PRIMARY KEY,
    USER_ID INT NOT NULL,
    FEED_KEY VARCHAR(255) NOT NULL,
    PAYLOAD VARCHAR(255) NOT NULL,
    EXECUTE_AT TIMESTAMP NOT NULL,
    STATUS VARCHAR(255) NOT NULL DEFAULT 'PENDING',
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (USER_ID) REFERENCES USERS(ID),
)